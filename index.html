<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Futures Sniper | åˆçº¦ç‹™å‡»æ‰‹æ§åˆ¶å°</title>
    <!-- å¼•å…¥ React å’Œ ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- å¼•å…¥ Babel ç”¨äºè§£æ JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- å¼•å…¥ Tailwind CSS ç”¨äºæ ·å¼ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ Lucide å›¾æ ‡ -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        body { background-color: #0f172a; color: #e2e8f0; font-family: 'Inter', sans-serif; }
        .tv-widget-container { height: 500px; width: 100%; }
        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡ */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #64748b; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- ç»„ä»¶ï¼šKçº¿å½¢æ€å¯è§†åŒ–å¡ç‰‡ ---
        const PatternCard = ({ title, type, description, isBullish }) => {
            return (
                <div className="bg-slate-800 p-4 rounded-lg border border-slate-700 flex flex-col items-center hover:border-blue-500 transition-colors">
                    <div className="h-24 w-full flex justify-center items-center mb-2 bg-slate-900 rounded">
                        {/* ä½¿ç”¨ SVG ç»˜åˆ¶ç®€æ˜“ K çº¿å½¢æ€ */}
                        <svg width="60" height="80" viewBox="0 0 60 80">
                            {type === 'shooting-star' && (
                                <g>
                                    {/* é•¿ä¸Šå½±çº¿ */}
                                    <line x1="30" y1="10" x2="30" y2="40" stroke={isBullish ? "#22c55e" : "#ef4444"} strokeWidth="2" />
                                    {/* å®ä½“ */}
                                    <rect x="22" y="40" width="16" height="15" fill={isBullish ? "#22c55e" : "#ef4444"} />
                                    {/* çŸ­ä¸‹å½±çº¿ */}
                                    <line x1="30" y1="55" x2="30" y2="60" stroke={isBullish ? "#22c55e" : "#ef4444"} strokeWidth="2" />
                                </g>
                            )}
                             {type === 'hammer' && (
                                <g>
                                    {/* çŸ­ä¸Šå½±çº¿ */}
                                    <line x1="30" y1="20" x2="30" y2="25" stroke={isBullish ? "#22c55e" : "#ef4444"} strokeWidth="2" />
                                    {/* å®ä½“ */}
                                    <rect x="22" y="25" width="16" height="15" fill={isBullish ? "#22c55e" : "#ef4444"} />
                                    {/* é•¿ä¸‹å½±çº¿ */}
                                    <line x1="30" y1="40" x2="30" y2="70" stroke={isBullish ? "#22c55e" : "#ef4444"} strokeWidth="2" />
                                </g>
                            )}
                            {type === 'engulfing' && (
                                <g>
                                    {/* å‰ä¸€æ ¹å°é˜´çº¿ */}
                                    <line x1="15" y1="35" x2="15" y2="55" stroke="#ef4444" strokeWidth="2" />
                                    <rect x="10" y="40" width="10" height="10" fill="#ef4444" />
                                    {/* åä¸€æ ¹å¤§é˜³çº¿ */}
                                    <line x1="40" y1="20" x2="40" y2="65" stroke="#22c55e" strokeWidth="2" />
                                    <rect x="32" y="25" width="16" height="35" fill="#22c55e" />
                                </g>
                            )}
                        </svg>
                    </div>
                    <h4 className={`font-bold ${isBullish ? 'text-green-400' : 'text-red-400'}`}>{title}</h4>
                    <p className="text-xs text-slate-400 text-center mt-1">{description}</p>
                </div>
            );
        };

        // --- ä¸»ç¨‹åº ---
        const App = () => {
            // é»˜è®¤è®¾ç½®ä¸ºå¸å®‰æ°¸ç»­åˆçº¦æ•°æ®
            const [symbol, setSymbol] = useState("BINANCE:BTCUSDT.P"); 
            const [direction, setDirection] = useState("long"); // 'long' or 'short'
            
            // è¯„åˆ†ç³»ç»ŸçŠ¶æ€
            const [scores, setScores] = useState({
                trend: { ma99: false, ma_align: false, dow: false, slope: false },
                location: { fib: false, ma_touch: false, vpvr: false },
                signal: { divergence: false, pattern: false, oi: false },
                macro: { funding: false, fed: false, sentiment: false }
            });

            // æƒé‡å®šä¹‰ (åŸºäºä¹‹å‰çš„ 1000 åˆ†ç³»ç»Ÿ)
            const weights = {
                trend: { ma99: 200, ma_align: 100, dow: 80, slope: 20 },
                location: { fib: 150, ma_touch: 100, vpvr: 50 },
                signal: { divergence: 80, pattern: 60, oi: 60 },
                macro: { funding: 40, fed: 80, sentiment: 30 } // åŒ…å«åŠ æ¯é™æ¯é¢„æœŸ
            };

            // è®¡ç®—æ€»åˆ†
            const totalScore = useMemo(() => {
                let total = 0;
                Object.keys(scores).forEach(category => {
                    Object.keys(scores[category]).forEach(key => {
                        if (scores[category][key]) {
                            total += weights[category][key];
                        }
                    });
                });
                return total;
            }, [scores]);

            // è®¡ç®—èƒœç‡ä¼°ç®—å’Œå»ºè®®
            const getRecommendation = (score) => {
                if (score >= 900) return { 
                    text: "ä¼ è¯´çº§æœºä¼š (Sçº§)", 
                    action: "é‡ä»“å‡ºå‡»", 
                    winRate: "85%+", 
                    color: "text-purple-400", 
                    bg: "bg-purple-900/50" 
                };
                if (score >= 800) return { 
                    text: "ç‹™å‡»çº§æœºä¼š (Açº§)", 
                    action: "æ ‡å‡†ä»“ä½è¿›åœº", 
                    winRate: "75% - 85%", 
                    color: "text-green-400", 
                    bg: "bg-green-900/50" 
                };
                if (score >= 700) return { 
                    text: "æ™®é€šæœºä¼š (Bçº§)", 
                    action: "è½»ä»“/å‡åŠä»“ä½", 
                    winRate: "60% - 75%", 
                    color: "text-yellow-400", 
                    bg: "bg-yellow-900/50" 
                };
                return { 
                    text: "åƒåœ¾æ—¶é—´ (è§‚å¯Ÿ)", 
                    action: "ç©ºä»“ä¼‘æ¯ / ç¦æ­¢å¼€å•", 
                    winRate: "< 50%", 
                    color: "text-red-400", 
                    bg: "bg-red-900/50" 
                };
            };

            const rec = getRecommendation(totalScore);

            // å¤„ç†å‹¾é€‰å˜åŒ–
            const handleCheck = (category, key) => {
                setScores(prev => ({
                    ...prev,
                    [category]: {
                        ...prev[category],
                        [key]: !prev[category][key]
                    }
                }));
            };

            // åŠ è½½ TradingView Widget
            useEffect(() => {
                const script = document.createElement('script');
                script.src = 'https://s3.tradingview.com/tv.js';
                script.async = true;
                script.onload = () => {
                    if (window.TradingView) {
                        new window.TradingView.widget({
                            "width": "100%",
                            "height": 500,
                            "symbol": symbol,
                            "interval": "240", // é»˜è®¤4å°æ—¶
                            "timezone": "Asia/Shanghai",
                            "theme": "dark",
                            "style": "1",
                            "locale": "zh_CN",
                            "toolbar_bg": "#f1f3f6",
                            "enable_publishing": false,
                            "allow_symbol_change": true,
                            "hide_side_toolbar": false, // ã€é‡è¦ã€‘å¼€å¯å·¦ä¾§ç»˜å›¾å·¥å…·æ ï¼ˆå«æ–æ³¢é‚£å¥‘ï¼‰
                            "container_id": "tradingview_chart",
                            "studies": [
                                "MASimple@tv-basicstudies", // MA
                                "RSI@tv-basicstudies",      // RSI
                                "Volume@tv-basicstudies"    // Vol
                            ],
                             "overrides": {
                                "paneProperties.background": "#0f172a",
                                "paneProperties.vertGridProperties.color": "#1e293b",
                                "paneProperties.horzGridProperties.color": "#1e293b",
                            }
                        });
                    }
                };
                document.getElementById('tradingview_chart').innerHTML = '';
                document.body.appendChild(script);
            }, [symbol]);

            return (
                <div className="container mx-auto p-4 max-w-6xl">
                    {/* å¤´éƒ¨ */}
                    <header className="flex justify-between items-center mb-6 border-b border-slate-700 pb-4">
                        <div>
                            <h1 className="text-2xl font-bold text-blue-400 flex items-center gap-2">
                                <span className="text-3xl">ğŸ¯</span> åˆçº¦ç‹™å‡»æ‰‹æ§åˆ¶å°
                            </h1>
                            <p className="text-slate-400 text-sm mt-1">åŸºäº 1000 åˆ†åˆ¶å…¨ç»´ç‹™å‡»ç³»ç»Ÿ | å®è§‚ + æŠ€æœ¯ + èµ„é‡‘æµ</p>
                        </div>
                        <div className="flex gap-4">
                            <select 
                                value={symbol} 
                                onChange={(e) => setSymbol(e.target.value)}
                                className="bg-slate-800 text-white p-2 rounded border border-slate-600 focus:border-blue-500 outline-none"
                            >
                                <option value="BINANCE:BTCUSDT.P">BTC/USDT æ°¸ç»­ (å¸å®‰)</option>
                                <option value="BINANCE:ETHUSDT.P">ETH/USDT æ°¸ç»­ (å¸å®‰)</option>
                                <option value="BINANCE:SOLUSDT.P">SOL/USDT æ°¸ç»­ (å¸å®‰)</option>
                            </select>
                            <div className="flex bg-slate-800 rounded p-1">
                                <button 
                                    onClick={() => setDirection('long')}
                                    className={`px-4 py-1 rounded transition-colors ${direction === 'long' ? 'bg-green-600 text-white' : 'text-slate-400'}`}
                                >åšå¤š (Long)</button>
                                <button 
                                    onClick={() => setDirection('short')}
                                    className={`px-4 py-1 rounded transition-colors ${direction === 'short' ? 'bg-red-600 text-white' : 'text-slate-400'}`}
                                >åšç©º (Short)</button>
                            </div>
                        </div>
                    </header>

                    {/* å›¾è¡¨åŒºåŸŸ */}
                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                        <div className="lg:col-span-2 bg-slate-800 rounded-lg overflow-hidden border border-slate-700 shadow-xl">
                            {/* TradingView å®¹å™¨ */}
                            <div id="tradingview_chart"></div>
                            <div className="bg-slate-900 p-2 text-xs text-slate-500 text-center">
                                * æç¤ºï¼šç‚¹å‡»å›¾è¡¨å·¦ä¾§ç¬¬3ä¸ªå›¾æ ‡å¯ä½¿ç”¨â€œæ–æ³¢é‚£å¥‘å›è°ƒâ€å·¥å…·ç”»çº¿
                            </div>
                        </div>

                        {/* è¯„åˆ†è®¡ç®—å™¨åŒºåŸŸ */}
                        <div className="bg-slate-800 rounded-lg p-6 border border-slate-700 flex flex-col h-[500px]">
                            <h2 className="text-xl font-bold mb-4 flex items-center gap-2">
                                ğŸ“Š èƒœç‡è®¡ç®—å™¨ 
                                <span className="text-xs font-normal text-slate-400">(è¯·å‹¾é€‰å½“å‰ç¬¦åˆçš„æ¡ä»¶)</span>
                            </h2>
                            
                            <div className="flex-1 overflow-y-auto pr-2 space-y-6">
                                {/* ç¬¬ä¸€æ¿å—ï¼šå¤©æ—¶ */}
                                <section>
                                    <h3 className="text-blue-400 font-bold mb-2 text-sm uppercase tracking-wider">1. å¤©æ—¶ (è¶‹åŠ¿) - 400åˆ†</h3>
                                    <div className="space-y-2">
                                        <label className="flex items-center gap-3 cursor-pointer hover:bg-slate-700/50 p-2 rounded">
                                            <input type="checkbox" checked={scores.trend.ma99} onChange={() => handleCheck('trend', 'ma99')} className="w-5 h-5 accent-blue-500" />
                                            <div>
                                                <div className="font-medium text-slate-200">å‘¨çº¿ EMA 99 {direction === 'long' ? 'ä¹‹ä¸Š' : 'ä¹‹ä¸‹'}</div>
                                                <div className="text-xs text-slate-500">ç‰›ç†Šåˆ†ç•Œçº¿ï¼Œå¿…é¡»è¦å¯¹</div>
                                            </div>
                                            <span className="ml-auto text-green-400 text-sm font-mono">+200</span>
                                        </label>
                                        <label className="flex items-center gap-3 cursor-pointer hover:bg-slate-700/50 p-2 rounded">
                                            <input type="checkbox" checked={scores.trend.ma_align} onChange={() => handleCheck('trend', 'ma_align')} className="w-5 h-5 accent-blue-500" />
                                            <div>
                                                <div className="font-medium text-slate-200">æ—¥çº¿ EMA æ’åˆ—æ­£ç¡®</div>
                                                <div className="text-xs text-slate-500">20 > 99 > 200 (å¤šå¤´) æˆ–åä¹‹</div>
                                            </div>
                                            <span className="ml-auto text-green-400 text-sm font-mono">+100</span>
                                        </label>
                                         <label className="flex items-center gap-3 cursor-pointer hover:bg-slate-700/50 p-2 rounded">
                                            <input type="checkbox" checked={scores.trend.dow} onChange={() => handleCheck('trend', 'dow')} className="w-5 h-5 accent-blue-500" />
                                            <div className="font-medium text-slate-200">ç»“æ„: é«˜ç‚¹/ä½ç‚¹æŠ¬é«˜</div>
                                            <span className="ml-auto text-green-400 text-sm font-mono">+80</span>
                                        </label>
                                    </div>
                                </section>

                                {/* ç¬¬äºŒæ¿å—ï¼šåœ°åˆ© */}
                                <section>
                                    <h3 className="text-blue-400 font-bold mb-2 text-sm uppercase tracking-wider">2. åœ°åˆ© (ä½ç½®) - 300åˆ†</h3>
                                    <div className="space-y-2">
                                        <label className="flex items-center gap-3 cursor-pointer hover:bg-slate-700/50 p-2 rounded">
                                            <input type="checkbox" checked={scores.location.fib} onChange={() => handleCheck('location', 'fib')} className="w-5 h-5 accent-blue-500" />
                                            <div>
                                                <div className="font-medium text-slate-200">æ–æ³¢é‚£å¥‘ 0.618</div>
                                                <div className="text-xs text-slate-500">æœ€å¼ºå›è°ƒ/åå¼¹ä½</div>
                                            </div>
                                            <span className="ml-auto text-green-400 text-sm font-mono">+150</span>
                                        </label>
                                        <label className="flex items-center gap-3 cursor-pointer hover:bg-slate-700/50 p-2 rounded">
                                            <input type="checkbox" checked={scores.location.ma_touch} onChange={() => handleCheck('location', 'ma_touch')} className="w-5 h-5 accent-blue-500" />
                                            <div className="font-medium text-slate-200">å›è¸©æ—¥çº¿ EMA 99/200</div>
                                            <span className="ml-auto text-green-400 text-sm font-mono">+100</span>
                                        </label>
                                        <label className="flex items-center gap-3 cursor-pointer hover:bg-slate-700/50 p-2 rounded">
                                            <input type="checkbox" checked={scores.location.vpvr} onChange={() => handleCheck('location', 'vpvr')} className="w-5 h-5 accent-blue-500" />
                                            <div className="font-medium text-slate-200">VPVR ç­¹ç å¯†é›†åŒº</div>
                                            <span className="ml-auto text-green-400 text-sm font-mono">+50</span>
                                        </label>
                                    </div>
                                </section>

                                {/* ç¬¬ä¸‰æ¿å—ï¼šäººå’Œ */}
                                <section>
                                    <h3 className="text-blue-400 font-bold mb-2 text-sm uppercase tracking-wider">3. äººå’Œ (ä¿¡å·) - 200åˆ†</h3>
                                    <div className="space-y-2">
                                        <label className="flex items-center gap-3 cursor-pointer hover:bg-slate-700/50 p-2 rounded">
                                            <input type="checkbox" checked={scores.signal.divergence} onChange={() => handleCheck('signal', 'divergence')} className="w-5 h-5 accent-blue-500" />
                                            <div>
                                                <div className="font-medium text-slate-200">RSI / OBV / CVD èƒŒç¦»</div>
                                                <div className="text-xs text-slate-500">ä»·æ ¼æ–°ä½ä½†æŒ‡æ ‡æŠ¬é«˜</div>
                                            </div>
                                            <span className="ml-auto text-green-400 text-sm font-mono">+80</span>
                                        </label>
                                        <label className="flex items-center gap-3 cursor-pointer hover:bg-slate-700/50 p-2 rounded">
                                            <input type="checkbox" checked={scores.signal.pattern} onChange={() => handleCheck('signal', 'pattern')} className="w-5 h-5 accent-blue-500" />
                                            <div className="font-medium text-slate-200">Kçº¿: æ’é’ˆ/åæ²¡</div>
                                            <span className="ml-auto text-green-400 text-sm font-mono">+60</span>
                                        </label>
                                         <label className="flex items-center gap-3 cursor-pointer hover:bg-slate-700/50 p-2 rounded">
                                            <input type="checkbox" checked={scores.signal.oi} onChange={() => handleCheck('signal', 'oi')} className="w-5 h-5 accent-blue-500" />
                                            <div className="font-medium text-slate-200">æŒä»“é‡ (OI) å¢åŠ </div>
                                            <span className="ml-auto text-green-400 text-sm font-mono">+60</span>
                                        </label>
                                    </div>
                                </section>

                                {/* ç¬¬å››æ¿å—ï¼šå¤©æœº */}
                                <section>
                                    <h3 className="text-blue-400 font-bold mb-2 text-sm uppercase tracking-wider">4. å¤©æœº (å®è§‚) - 100åˆ†</h3>
                                    <div className="space-y-2">
                                        <label className="flex items-center gap-3 cursor-pointer hover:bg-slate-700/50 p-2 rounded">
                                            <input type="checkbox" checked={scores.macro.fed} onChange={() => handleCheck('macro', 'fed')} className="w-5 h-5 accent-blue-500" />
                                            <div>
                                                <div className="font-medium text-slate-200">é™æ¯/åŠ æ¯é¢„æœŸ</div>
                                                <div className="text-xs text-slate-500">CMEæ•°æ®åˆ©å¥½æ–¹å‘</div>
                                            </div>
                                            <span className="ml-auto text-green-400 text-sm font-mono">+80</span>
                                        </label>
                                        <label className="flex items-center gap-3 cursor-pointer hover:bg-slate-700/50 p-2 rounded">
                                            <input type="checkbox" checked={scores.macro.funding} onChange={() => handleCheck('macro', 'funding')} className="w-5 h-5 accent-blue-500" />
                                            <div className="font-medium text-slate-200">è´¹ç‡ä¼˜åŠ¿ (è´Ÿè´¹ç‡/æ­£å¸¸)</div>
                                            <span className="ml-auto text-green-400 text-sm font-mono">+40</span>
                                        </label>
                                    </div>
                                </section>
                            </div>

                            {/* ç»“æœæ˜¾ç¤º */}
                            <div className={`mt-4 p-4 rounded-lg border ${rec.bg} border-slate-600`}>
                                <div className="flex justify-between items-end">
                                    <div>
                                        <div className="text-slate-400 text-sm">å½“å‰æ€»åˆ†</div>
                                        <div className={`text-3xl font-bold font-mono ${rec.color}`}>{totalScore} <span className="text-base text-slate-400">/ 1000</span></div>
                                    </div>
                                    <div className="text-right">
                                        <div className={`font-bold text-lg ${rec.color}`}>{rec.text}</div>
                                        <div className="text-sm text-slate-300">èƒœç‡é¢„ä¼°: {rec.winRate}</div>
                                    </div>
                                </div>
                                <div className="mt-2 pt-2 border-t border-slate-600/50 flex justify-between items-center">
                                    <span className="text-sm text-slate-400">æ“ä½œå»ºè®®:</span>
                                    <span className={`font-bold ${rec.color}`}>{rec.action}</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* è¾…åŠ©åŒºåŸŸï¼šKçº¿å½¢æ€é€ŸæŸ¥ */}
                    <div className="mb-10">
                        <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
                            ğŸ“– ä¿¡å·é€ŸæŸ¥æ‰‹å†Œ
                            <span className="text-xs font-normal text-slate-400">(çœ‹åˆ°è¿™äº›å½¢æ€å†å¼€å•)</span>
                        </h3>
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <PatternCard 
                                title="çœ‹æ¶¨æ’é’ˆ (Pin Bar)" 
                                type="hammer"
                                isBullish={true}
                                description="é•¿ä¸‹å½±çº¿ï¼Œå®ä½“åœ¨ä¸Šæ–¹ã€‚è¡¨æ˜ä¸‹æ–¹ä¹°ç›˜æå¼ºï¼Œæœ‰äººæ‰˜åº•ã€‚" 
                            />
                            <PatternCard 
                                title="çœ‹æ¶¨åæ²¡ (Engulfing)" 
                                type="engulfing"
                                isBullish={true}
                                description="å³è¾¹å¤§é˜³çº¿å®Œå…¨åŒ…ä½å·¦è¾¹é˜´çº¿ã€‚å¤šå¤´åæ”»å·è§’ã€‚" 
                            />
                             <PatternCard 
                                title="çœ‹è·Œæµæ˜Ÿ (Shooting Star)" 
                                type="shooting-star"
                                isBullish={false}
                                description="é•¿ä¸Šå½±çº¿ï¼Œå®ä½“åœ¨ä¸‹æ–¹ã€‚è¡¨æ˜ä¸Šæ–¹æŠ›å‹é‡ï¼Œå†²é«˜å›è½ã€‚" 
                            />
                            <PatternCard 
                                title="çœ‹è·Œåæ²¡ (Engulfing)" 
                                type="engulfing"
                                isBullish={false}
                                description="å³è¾¹å¤§é˜´çº¿å®Œå…¨åƒæ‰å·¦è¾¹é˜³çº¿ã€‚ç©ºå¤´ç ¸ç›˜å¼€å§‹ã€‚" 
                            />
                        </div>
                    </div>

                    {/* åº•éƒ¨è¯´æ˜ */}
                    <footer className="text-center text-slate-500 text-sm pb-8">
                        <p>âš ï¸ é£é™©æç¤ºï¼šæœ¬å·¥å…·ä»…ä¾›è¾…åŠ©å†³ç­–ï¼Œä¸èƒ½ä¿è¯ 100% ç›ˆåˆ©ã€‚åˆçº¦äº¤æ˜“é£é™©æå¤§ï¼Œè¯·ä¸¥æ ¼è®¾ç½®æ­¢æŸã€‚</p>
                        <p className="mt-2">Recommended Tools: TradingView | Coinglass | CME FedWatch</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
